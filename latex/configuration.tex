% Settings used by \usepackage{fancyhdr}
\fancypagestyle{fancy}{
  % Fancy Header Formatting
  \renewcommand{\headrulewidth}{0.4pt}
  \fancyhead[L]{Letters of a Young Philosopher}
  \fancyhead[C]{}
  \fancyhead[R]{Chapter \thechapter}

  % Fancy Footer Formatting
  \renewcommand{\footrulewidth}{0pt}
  \fancyfoot[L]{}
  \fancyfoot[C]{Page \thepage\ of \pageref*{LastPage}}
  \fancyfoot[R]{}
}
% Update the plain heading format so that the first page includes page n of m
\fancypagestyle{plain}{
  % Clear all definitions from the fancy pagestyle
  \fancyhf{}
  \renewcommand{\headrulewidth}{0pt}
  \renewcommand{\footrulewidth}{0pt}

  % Ensure page numbers are the form page n of m.
  \fancyfoot[C]{Page \thepage\ of \pageref*{LastPage}}
}
% Set the document header-footer pagestyle to fancy, from above
\pagestyle{fancy}

% Mathematical typesetting packages
% \usepackage{amsmath}                % Needed for most math things.
% \usepackage{amssymb}                % Additional mathematical symbols
% \usepackage{amsthm}                 % For theorem and proof environments
% \usepackage{tkz-euclide}            % Used for planar geometry (Euclidean)

% Scientific graphics and plotting
% \usepackage{tikz}                   % Used for graphical illustrations.
% \usepackage{pgfplots}               % Used for scientific graphs and charts

% Packages for typesetting code and pseudocode
% In order to use minted, you must edit your makefile to -use-shell-escape!
% \usepackage{minted}                 % Code highlighting: \begin{minted}{python}
% \usepackage{algorithm}              % Float environment for pseudocode
% \usepackage{algpseudocode}          % Typesetting library for pseudocode

% Optional LaTeX packages for additional functionality
% \usepackage[noframe]{showframe}     % Debug option to show margin frames.
% \usepackage{float}                  % For arranging floats
% \usepackage{graphicx}               % Required for embedding images
% \usepackage{booktabs}               % For prettier tables
% \usepackage{geometry}               % Sets more "reasonable" margin-sizes
% \usepackage{xeCJK}                  % For typesetting CJK characters
% \usepackage[l2tabu, orthodox]{nag}  % Verbose warnings for typesetting

% First save the page geometry for when marginnotes are not in use
\newgeometry{
  % Preserve the LaTeX default \textwidth and \textheight
  textwidth =\textwidth,
  textheight=\textheight,
  % Include the margin notes space when doing body calculations
  includemp=false,
  % Increase margin notes width and seperation
  marginparwidth=0cm,
  marginparsep=0cm,
  % Center doucment body vertically and horizontally
  hcentering=true,
  vcentering=true,
  % Minor tweaks to header and footer seperation
  headsep   =0.5cm,
  footskip  =1cm,
  bindingoffset=0cm
}
\savegeometry{default}

% Custom geometry for larger margin notes with assymetric body layout
\newgeometry{
  % Preserve the LaTeX default \textwidth and \textheight
  textwidth =\textwidth,
  textheight=\textheight,
  % Include the margin notes space when doing body calculations
  includemp=true,
  % Increase margin notes width and seperation
  marginparwidth=0.25\textwidth,
  marginparsep=0.5cm,
  % Center doucment body vertically and horizontally
  hcentering=true,
  vcentering=true,
  % Minor tweaks to header and footer seperation
  headsep   =0.5cm,
  footskip  =1cm,
  bindingoffset=0cm
}
\savegeometry{margins}

% Define commands to simplify the loading of custom geometries
\newcommand{\enablemarginnotes}{%
  \loadgeometry{margins}
  \setlength{\headwidth}{\textwidth}
  \addtolength{\headwidth}{\marginparsep}
  \addtolength{\headwidth}{\marginparwidth}
  \pagestyle{fancy}
}

\newcommand{\disablemarginnotes}{%
  \loadgeometry{default}
  \setlength{\headwidth}{\textwidth}
  \addtolength{\headwidth}{\marginparsep}
  \addtolength{\headwidth}{\marginparwidth}
  \pagestyle{plain}
}

\renewcommand*{\marginfont}{\scriptsize\slshape}

% Force margin notes to use (sloppy) justification
\renewcommand\raggedrightmarginnote{\sloppy}
\renewcommand\raggedleftmarginnote{\sloppy}

% Settings used by \usepackage{pgfplots}
% \pgfplotsset{compat=1.17}
% \pgfplotsset{samples=300}

% The biblatex package should go last!
% FYI: the biblatex package is used to generate a bibliography. However, unless
% intense citation management (e.g. 5+ sources) is used, biblatex should not
% be loaded, as it slows down the document compilation process by almost 2X.
% In order to enable it, see sections/endpage.tex and essay-name.tex's preamble

\usepackage[style=mla, backend=biber]{biblatex} % Nice MLA bibliography
\addbibresource{citations.bib} % Biblatex. See includes/formatting.tex
\SetCiteCommand{\autocite} % For use with csquotes, where you can do:
% \textcquote[175]{key}{quoted text here}

% Any additional user configuration goes below
